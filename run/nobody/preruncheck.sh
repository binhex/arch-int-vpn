#!/bin/bash

# script to call multiple scripts in series to read in values written by script /root/prerunget.sh

# blocking script, will wait for valid ip address assigned to tun0/tap0 (port read in from file /tmp/getvpnip)
# value read in is generated by script /root/getvpnip.sh
source /home/nobody/checkvpnip.sh

# blocking script, will wait for vpn incoming port to be assigned (port read in from file /tmp/getvpnport)
# value read in is generated by script /root/getvpnport.sh
source /home/nobody/checkvpnport.sh

# blocking script, will wait for name resolution to be operational
source /home/nobody/checkdns.sh www.google.com

# blocking script, will wait for external ip address retrieval (external ip read in from file /tmp/getvpnextip)
# value read in is generated by script /root/getvpnextip.sh
source /home/nobody/checkvpnextip.sh

# blocking script, will wait for iptables chain policy to be DROP (iptables listing read in from file /tmp/getiptables)
# value read in is generated by script /root/iptable.sh
source /home/nobody/checkiptables.sh
